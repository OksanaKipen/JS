<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>user-details</title>
</head>
<body>
    <div id="userDetails"></div>
    <div id="posts"></div>

<script>
    const url = new URLSearchParams(window.location.search);
    const userId = url.get('id');

    fetch(`https://jsonplaceholder.typicode.com/users/${userId}`)
        .then(res => res.json())
        .then(user => {
            const userDetails = document.getElementById('userDetails');
            userDetails.innerText = `
              ID: ${user.id}
              Name: ${user.name}
              Username: ${user.username}
              Email: ${user.email}
              Address: ${user.address.street}, ${user.address.suite}, ${user.address.city}, ${user.address.zipcode}
              Geo Location: Lat: ${user.address.geo.lat}, Lng: ${user.address.geo.lng}`

            const postDiv = document.getElementById('posts');
            const postBtn = document.createElement('button');
            postBtn.innerText = 'User`s Posts';

            postBtn.addEventListener('click', () => {
                fetch(`https://jsonplaceholder.typicode.com/users/${userId}/posts`)
                    .then(res => res.json())
                    .then(posts => {
                        posts.forEach(post => {
                            const postBlock = document.createElement('div');
                            const postLink = document.createElement('a');
                            postLink.innerText = post.title;
                            postLink.href = `post-details.html?postId=${post.id}`;

                            postBlock.appendChild(postLink);
                            postDiv.appendChild(postBlock);
                        })
                    })
                    .catch(error =>{
                        console.log('Помилка отримання даних', error)
            })
        })
        postDiv.appendChild(postBtn)
        })
        .catch(error =>{
            console.log('Помилка отримання інформації', error)
        })

</script>

</body>
</html>